{"id":"recipes-06h","title":"Show the variants of a recipe in card type things near the top (before the servings picker)","description":"The variants are hidden at the moment, it would be great if they were near the top in a carousel type UI (random order)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:05:59.727089368Z","created_by":"jack","updated_at":"2026-01-03T11:26:30.62014154Z","closed_at":"2026-01-03T11:26:30.62014154Z","close_reason":"Added variants carousel at the top of recipe detail (before servings picker). Cards are horizontally scrollable with random order. Removed old list-style variants section from bottom.","labels":["variants"],"dependencies":[{"issue_id":"recipes-06h","depends_on_id":"recipes-qo9","type":"blocks","created_at":"2026-01-03T11:18:58.860128891Z","created_by":"jack"}]}
{"id":"recipes-0oo","title":"When previewing a recipe in the recipe chat, it causes the bottom of the chat widget to go off the bottom of the page","notes":"Reduced max-height of chat messages and recipe previews using vh units to ensure the chat modal stays within viewport bounds.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T13:01:04.747183079Z","created_by":"jack","updated_at":"2026-01-03T13:08:46.60607681Z","closed_at":"2026-01-03T13:08:46.606085539Z"}
{"id":"recipes-2os","title":"Improve the display of the filter bar to improve the usability of it","description":"currently the rating selectors and tags button all look the same, and the search by ingredient option looks quite sad. The refresh button next to them also looks out of place - maybe should be right aligned instead, or part of an overhaul of that bar. When tags are selected, they should show up on the bar.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:00:29.307168626Z","created_by":"jack","updated_at":"2026-01-03T11:29:25.432813267Z","closed_at":"2026-01-03T11:29:25.432813267Z","close_reason":"Redesigned filter bar: rating chips with color coding in segmented control style, tags toggle button with arrow, ingredient filter with carrot icon prefix, reshuffle button right-aligned, selected tags now display as removable chips below the bar.","labels":["filtering","ui"]}
{"id":"recipes-401","title":"When I use the surprise me button to get to a recipe, it should still show up on that page so I can jump to another recipe if I don't like that one","notes":"Added a 'Surprise me' button (üé≤) to the recipe detail header, allowing users to jump to another random recipe directly from the detail view.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:42:07.228273029Z","created_by":"jack","updated_at":"2026-01-03T12:39:39.307412719Z","closed_at":"2026-01-03T12:39:39.307420241Z"}
{"id":"recipes-42s","title":"Use a pointer cursor for the tags selection menu","description":"Also audit other places where a pointer cursor would be appropriate","notes":"Added cursor: pointer to tags in the popover menu.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:52:51.519466414Z","created_by":"jack","updated_at":"2026-01-03T13:09:27.779247627Z","closed_at":"2026-01-03T13:09:27.779257202Z"}
{"id":"recipes-4y5","title":"When clicking a suggested prompt, it should fill that into the box but shouldn't submit, so I can edit it","notes":"Updated suggestion prompts in both RecipeGenerator and ChatModal to fill the input field instead of auto-submitting, allowing users to edit the prompt before sending.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T14:44:46.635249883Z","created_by":"jack","updated_at":"2026-01-03T15:17:20.055980691Z","closed_at":"2026-01-03T15:17:20.055989764Z"}
{"id":"recipes-5i3","title":"Resuming a timer should resume from the current time, not restart it from the beginning","notes":"Updated useTimer hook to preserve remainingSeconds when restarting a timer that is already in progress but paused.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T14:43:17.424027548Z","created_by":"jack","updated_at":"2026-01-03T14:44:19.642142947Z","closed_at":"2026-01-03T14:44:19.642151967Z"}
{"id":"recipes-65e","title":"Extract duplicated SSE parsing code in client.ts","description":"## Problem\n\nThe SSE stream reading and parsing logic is duplicated 6 times in `frontend/src/api/client.ts`:\n- `importFromUrlWithProgress` (lines 90-146)\n- `importFromPhotosWithProgress` (lines 165-219)\n- `importFromTextWithProgress` (lines 228-284)\n- `queueImportFromUrl` (lines 294-347)\n- `queueImportFromPhotos` (lines 349-402)\n- `queueImportFromText` (lines 404-457)\n\nEach function has nearly identical code for:\n1. Reading from response body reader\n2. Decoding with TextDecoder\n3. Buffering and splitting on newlines\n4. Parsing SSE `data:` lines\n5. Handling complete/error stages\n\n## Suggested fix\n\nExtract a helper function like:\n\n```typescript\nasync function processSSEStream\u003cT\u003e(\n  response: Response,\n  onProgress: (data: any) =\u003e void,\n  onComplete: (data: T) =\u003e T,\n): Promise\u003cT\u003e\n```\n\nOr create a generator-based approach for cleaner code.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-11T20:22:57.595211866Z","created_by":"jack","updated_at":"2026-01-11T20:28:05.460389882Z","closed_at":"2026-01-11T20:28:05.460389882Z","close_reason":"Extracted two helper functions: processSSEStream (for async/await) and processSSEStreamWithCallbacks (for fire-and-forget). Reduced code duplication from 6 implementations to 2 shared helpers."}
{"id":"recipes-8j8","title":"Store the LLM conversations in local storage rather than in the DB","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-03T14:11:10.12951992Z","created_by":"jack","updated_at":"2026-01-03T14:11:39.551059177Z","deleted_at":"2026-01-03T14:11:39.551059177Z","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"recipes-awq","title":"Run backend tests in CI pipeline","description":"Update .github/workflows/ci.yml to execute 'npm test' for the backend to block PRs if tests fail.","notes":"Added 'npm test' to CI pipeline and configured root test script.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:47:57.095258102Z","created_by":"jack","updated_at":"2026-01-03T12:49:59.585855218Z","closed_at":"2026-01-03T12:49:59.585866632Z"}
{"id":"recipes-ayj","title":"In the cooking list, have a button to show the combined ingredients that I need","notes":"Implemented Shopping List view with combined ingredients.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T11:44:03.247902269Z","created_by":"jack","updated_at":"2026-01-03T12:35:27.423008992Z","closed_at":"2026-01-03T12:35:27.423017952Z"}
{"id":"recipes-b58","title":"If I enable keep awake, it should reenable itself if I switch away from the tab then switch back again","description":"The Wake Lock API releases the lock when the tab loses visibility. When the user returns to the tab, the lock should automatically re-acquire if it was previously enabled.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:07:51.878288581Z","created_by":"jack","updated_at":"2026-01-03T11:20:59.895720637Z","closed_at":"2026-01-03T11:20:59.895720637Z","close_reason":"Fixed by tracking user intent (wantsLock) separately from active lock state. When tab becomes visible and user wanted lock, it re-acquires automatically."}
{"id":"recipes-bvq","title":"Add integration smoke tests for wildcard routing and API","description":"Add tests to verify:\n1. The catch-all route (/*path) returns 200/index.html (doesn't crash).\n2. Basic API endpoints (e.g., /api/recipes) return 200.\nThis ensures the app starts up and defines routes correctly.","notes":"Added integration smoke tests for wildcard routing and API endpoints.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T12:47:52.043041615Z","created_by":"jack","updated_at":"2026-01-03T12:49:29.96945447Z","closed_at":"2026-01-03T12:49:29.969460774Z"}
{"id":"recipes-bw8","title":"Set up backend integration testing with Vitest and Supertest","description":"To prevent regression of routing errors (like the recent Express 5 wildcard issue) and ensure API stability.\n1. Refactor backend/src/index.ts to separate app definition from server startup (create src/app.ts).\n2. Install vitest and supertest in backend workspace.\n3. Configure test script.","notes":"Refactored backend to export app, installed Vitest/Supertest, and added test script.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T12:47:46.962024518Z","created_by":"jack","updated_at":"2026-01-03T12:48:52.611634191Z","closed_at":"2026-01-03T12:48:52.611639465Z"}
{"id":"recipes-d4l","title":"The ratings for recipes should show as the thumbs on the homepage, rather than the coloured dots","notes":"Updated RecipeCard to display thumb emojis instead of colored dots","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:46:30.875494107Z","created_by":"jack","updated_at":"2026-01-03T12:31:56.581804054Z","closed_at":"2026-01-03T12:31:56.581814634Z"}
{"id":"recipes-dwz","title":"Filter by 'main' tag by default","description":"The 'main' tag indicates primary/main course recipes. Apply this filter by default on the homepage so users see main dishes first. Should be clearable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T10:58:16.15927518Z","created_by":"jack","updated_at":"2026-01-03T11:24:40.539564429Z","closed_at":"2026-01-03T11:24:40.539564429Z","close_reason":"Homepage now defaults to filtering by 'main' tag. Users can clear this filter to see all recipes.","labels":["filtering"],"dependencies":[{"issue_id":"recipes-dwz","depends_on_id":"recipes-nos","type":"blocks","created_at":"2026-01-03T11:18:58.902836215Z","created_by":"jack"}]}
{"id":"recipes-ev1","title":"Make the pause/resume/reset buttons on timers bigger, to fit with the visual of the timer","notes":"Increased padding and font size for timer control buttons.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T14:42:50.801923692Z","created_by":"jack","updated_at":"2026-01-03T14:44:50.827473673Z","closed_at":"2026-01-03T14:44:50.827481648Z"}
{"id":"recipes-ewp","title":"Change the rating system to be thumbs down/thumbs up/double thumbs up (where ideally the double thumbs up is a stylised icon with the thumbs overlapping, not just two thumbs up next to each other), with colour coding (something like red, soft green, saturated green)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T10:55:42.383503275Z","created_by":"jack","updated_at":"2026-01-03T11:23:02.777004703Z","closed_at":"2026-01-03T11:23:02.777004703Z","close_reason":"Changed rating system to thumbs: üëé (red/meh), üëç (soft green/good), overlapping üëçüëç (saturated green/great). Updated RecipeDetail, RecipeCard colors, and Home.tsx filter chips.","labels":["ui"]}
{"id":"recipes-f24","title":"Improve the filter bar","description":"The filter UI feels a bit cramped, and the down arrow on the tags doesn't look great, nor the actual tags list when it's expanded. Can you look at some ways to clean up that UI? I'm imagining maybe a bit more height on the bar, the selected tags appear inside the bar, and clicking the tags button opens a popover menu rather than just showing another bar, plus possibly using an icon library or SVG icon for the down arrow, but use your creativity","notes":"Improved the filter bar UI: increased height, integrated selected tags directly into the bar with a separator, and moved the tag selection list into a proper popover menu with an SVG arrow icon.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:46:21.22453022Z","created_by":"jack","updated_at":"2026-01-03T12:40:24.244814688Z","closed_at":"2026-01-03T12:40:24.244823011Z"}
{"id":"recipes-fje","title":"When showing a recipe, eg after creating it with AI, the quantity and timer tags should get rendered in some way (either format as text, eg '10 minutes' rather than {{timer:10}}, or also add some sort of tag visual to indicate that the model picked it out)","notes":"Implemented rendering of quantity and timer markers in the recipe preview components for both the AI generator and chat modal.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:55:57.072869511Z","created_by":"jack","updated_at":"2026-01-03T13:08:27.454161511Z","closed_at":"2026-01-03T13:08:27.454173366Z"}
{"id":"recipes-g9h","title":"Allow the LLM to suggest multiple recipes, if that's appropriate for the user's request","notes":"Updated chat route and frontend to support multiple suggested recipes in a single LLM response.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:58:44.391931996Z","created_by":"jack","updated_at":"2026-01-03T13:12:32.418777778Z","closed_at":"2026-01-03T13:12:32.418790684Z"}
{"id":"recipes-gm1","title":"Fix double scrollbars and small preview in chat","description":"The recipe preview in chat has double scrollbars and feels too small.\n1. Remove max-height and overflow from .chat-recipe-preview to let it expand naturally.\n2. Remove explicit max-height from .chat-messages (let flex layout handle it).\n3. Ensure .chat-recipes-pending handles scrolling for its content without nested scrollbars.","notes":"Removed restrictive max-heights from chat messages and recipe previews to eliminate double scrollbars and improve visibility.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T13:16:12.888038781Z","created_by":"jack","updated_at":"2026-01-03T13:17:02.736471989Z","closed_at":"2026-01-03T13:17:02.736477197Z"}
{"id":"recipes-gqi","title":"Show the description too in the variant cards","description":"Provide more context about what the variant changes","notes":"Added recipe description to variant cards and improved their layout with truncation.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T12:49:34.181255635Z","created_by":"jack","updated_at":"2026-01-03T13:10:23.075828335Z","closed_at":"2026-01-03T13:10:23.075838528Z"}
{"id":"recipes-hex","title":"The LLM is sometimes outputting steps as just an array of strings, rather than an array of objects with an instruction field, which results in no content being displayed in the steps","notes":"Updated validateParsedRecipe to correctly handle cases where the LLM returns steps as an array of strings instead of objects.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T13:05:30.89092733Z","created_by":"jack","updated_at":"2026-01-03T13:08:02.676972054Z","closed_at":"2026-01-03T13:08:02.676979938Z"}
{"id":"recipes-hqh","title":"Multi-Portion Recipe Variants","description":"Replace client-side quantity scaling with stored recipe variants. When a source recipe provides quantities for multiple portion sizes (e.g., 2, 3, and 4 portions), extract and store each as a portion variant. These are displayed with a dedicated number picker UI, separate from other recipe variants. Users can set a global default portion preference.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-04T11:42:36.24519659Z","created_by":"jack","updated_at":"2026-01-04T11:42:43.807126495Z"}
{"id":"recipes-hqh.1","title":"Add variant_type column to schema","description":"Add variant_type column to recipes table: 'portion' for same recipe different serving size, 'content' for different ingredients/method, NULL for standalone recipe","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:42:54.463296479Z","created_by":"jack","updated_at":"2026-01-04T11:44:20.76446336Z","closed_at":"2026-01-04T11:44:20.76446336Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.1","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:42:54.485281467Z","created_by":"jack"}]}
{"id":"recipes-hqh.10","title":"Include sibling portion variants","description":"When viewing a variant, also fetch its siblings (other portion variants of same parent)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:14.674902385Z","created_by":"jack","updated_at":"2026-01-04T11:50:24.341115284Z","closed_at":"2026-01-04T11:50:24.341115284Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.10","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:14.676503649Z","created_by":"jack"}]}
{"id":"recipes-hqh.11","title":"Create PortionPicker component","description":"Number buttons for available portion sizes with [+] for requesting new portion size via chat","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:14.808365734Z","created_by":"jack","updated_at":"2026-01-04T11:55:04.662370618Z","closed_at":"2026-01-04T11:55:04.662370618Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.11","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:14.810203466Z","created_by":"jack"}]}
{"id":"recipes-hqh.12","title":"Update RecipeDetail with PortionPicker","description":"Replace ScalingControls, handle navigation between portion variants","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:14.951924608Z","created_by":"jack","updated_at":"2026-01-04T11:55:04.688919374Z","closed_at":"2026-01-04T11:55:04.688919374Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.12","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:14.954135617Z","created_by":"jack"}]}
{"id":"recipes-hqh.13","title":"Create usePreferences hook","description":"localStorage-based preferences including defaultPortions setting","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T11:43:24.193274103Z","created_by":"jack","updated_at":"2026-01-04T11:43:24.193274103Z","dependencies":[{"issue_id":"recipes-hqh.13","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:24.20369037Z","created_by":"jack"}]}
{"id":"recipes-hqh.14","title":"Auto-redirect to preferred portion","description":"When viewing recipe with variants, redirect to portion closest to user default preference","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T11:43:24.354583543Z","created_by":"jack","updated_at":"2026-01-04T11:43:24.354583543Z","dependencies":[{"issue_id":"recipes-hqh.14","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:24.35686725Z","created_by":"jack"}]}
{"id":"recipes-hqh.15","title":"Simplify scaling.ts utilities","description":"Remove scale parameter from formatQuantity and renderStepText, remove scaleQuantity function","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:24.489135749Z","created_by":"jack","updated_at":"2026-01-04T11:55:04.712350496Z","closed_at":"2026-01-04T11:55:04.712350496Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.15","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:24.491363262Z","created_by":"jack"}]}
{"id":"recipes-hqh.16","title":"Update CookingList without scaling","description":"Remove servings field from CookingListItem, simplify shopping list aggregation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:24.624586685Z","created_by":"jack","updated_at":"2026-01-04T11:55:04.73919204Z","closed_at":"2026-01-04T11:55:04.73919204Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.16","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:24.625949866Z","created_by":"jack"}]}
{"id":"recipes-hqh.17","title":"Update chat system prompt for variants","description":"Explain portion variant creation capability, provide existing variants for interpolation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:34.160559902Z","created_by":"jack","updated_at":"2026-01-04T16:26:40.371217161Z","closed_at":"2026-01-04T16:26:40.371217161Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.17","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:34.181339152Z","created_by":"jack"}]}
{"id":"recipes-hqh.18","title":"Handle portion variant creation in chat","description":"Set parentRecipeId and variantType on new recipes created via chat","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:34.326743956Z","created_by":"jack","updated_at":"2026-01-04T16:26:40.435659974Z","closed_at":"2026-01-04T16:26:40.435659974Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.18","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:34.328359871Z","created_by":"jack"}]}
{"id":"recipes-hqh.19","title":"Show content variants separately","description":"Display non-portion variants as 'Also try: X' section separate from portion picker","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:43:34.466492055Z","created_by":"jack","updated_at":"2026-01-04T16:26:40.483611429Z","closed_at":"2026-01-04T16:26:40.483611429Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.19","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:34.468719408Z","created_by":"jack"}]}
{"id":"recipes-hqh.2","title":"Add variantType to shared Recipe type","description":"Update TypeScript Recipe interface with variantType: 'portion' | 'content' | null field","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:42:54.641739915Z","created_by":"jack","updated_at":"2026-01-04T11:45:19.738454104Z","closed_at":"2026-01-04T11:45:19.738454104Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.2","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:42:54.643844036Z","created_by":"jack"}]}
{"id":"recipes-hqh.20","title":"Add CSS for PortionPicker","description":"Style number buttons and active state for portion picker UI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T11:43:34.628080196Z","created_by":"jack","updated_at":"2026-01-04T11:55:04.76106494Z","closed_at":"2026-01-04T11:55:04.76106494Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.20","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:34.631950618Z","created_by":"jack"}]}
{"id":"recipes-hqh.21","title":"Update docs","description":"Update README.md, overview.md and AGENTS.md as appropriate based on these changes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T12:02:51.237351473Z","created_by":"jack","updated_at":"2026-01-04T16:39:51.360429408Z","closed_at":"2026-01-04T16:39:51.360429408Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.21","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T12:02:51.239195276Z","created_by":"jack"}]}
{"id":"recipes-hqh.3","title":"Add ParsedRecipeWithVariants type","description":"New type for multi-variant parser output with variants array and sharedFields","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:42:54.746942588Z","created_by":"jack","updated_at":"2026-01-04T11:45:19.779275937Z","closed_at":"2026-01-04T11:45:19.779275937Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.3","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:42:54.748463363Z","created_by":"jack"}]}
{"id":"recipes-hqh.4","title":"Add portionVariants to RecipeWithDetails","description":"Add separate field for portion variants distinct from content variants","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:42:54.838805769Z","created_by":"jack","updated_at":"2026-01-04T11:45:19.817056099Z","closed_at":"2026-01-04T11:45:19.817056099Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.4","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:42:54.840974903Z","created_by":"jack"}]}
{"id":"recipes-hqh.5","title":"Update RECIPE_PARSE_PROMPT for variants","description":"Detect and extract multiple portion variants from source recipes when present","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:03.926438679Z","created_by":"jack","updated_at":"2026-01-04T11:47:15.377353664Z","closed_at":"2026-01-04T11:47:15.377353664Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.5","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:03.948531565Z","created_by":"jack"}]}
{"id":"recipes-hqh.6","title":"Update validateParsedRecipe for arrays","description":"Handle both single and multi-variant outputs from LLM","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:04.119667532Z","created_by":"jack","updated_at":"2026-01-04T11:47:15.403234546Z","closed_at":"2026-01-04T11:47:15.403234546Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.6","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:04.122316564Z","created_by":"jack"}]}
{"id":"recipes-hqh.7","title":"Add createRecipeWithPortionVariants query","description":"Create parent + linked portion variants in transaction","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:04.259793188Z","created_by":"jack","updated_at":"2026-01-04T11:48:54.603290975Z","closed_at":"2026-01-04T11:48:54.603290975Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.7","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:04.261747355Z","created_by":"jack"}]}
{"id":"recipes-hqh.8","title":"Update import routes for variants","description":"Handle variant arrays from parser, create linked recipes","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:04.396749703Z","created_by":"jack","updated_at":"2026-01-04T11:50:24.28567306Z","closed_at":"2026-01-04T11:50:24.28567306Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.8","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:04.398832204Z","created_by":"jack"}]}
{"id":"recipes-hqh.9","title":"Update getRecipeById for portion variants","description":"Fetch and return portion variants separately from content variants","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T11:43:14.506827305Z","created_by":"jack","updated_at":"2026-01-04T11:50:24.315355058Z","closed_at":"2026-01-04T11:50:24.315355058Z","close_reason":"Closed","dependencies":[{"issue_id":"recipes-hqh.9","depends_on_id":"recipes-hqh","type":"parent-child","created_at":"2026-01-04T11:43:14.528341887Z","created_by":"jack"}]}
{"id":"recipes-hye","title":"Add an LLM on the homepage too, for creating net new recipes","description":"I want to be able to create new recipes from scratch using the LLM, not just editing existing ones","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-03T11:03:43.116516761Z","created_by":"jack","updated_at":"2026-01-03T11:33:44.058066305Z","closed_at":"2026-01-03T11:33:44.058066305Z","close_reason":"Added AI recipe generator on homepage. Collapsible panel with prompt input, suggestion chips, and full recipe preview. Backend endpoint at /api/import/generate creates recipes from prompts using LLM.","labels":["llm"],"dependencies":[{"issue_id":"recipes-hye","depends_on_id":"recipes-xau","type":"blocks","created_at":"2026-01-03T11:18:58.938639227Z","created_by":"jack"}]}
{"id":"recipes-i8y","title":"Deleting a parent recipe orphans its variants","description":"## Problem\n\nWhen a parent recipe is deleted, the database schema uses `ON DELETE SET NULL` for `parent_recipe_id`, which means variants become orphaned:\n- Their `parent_recipe_id` becomes NULL\n- They still have `variant_type` set (e.g., 'portion')\n- They won't appear in the main recipe list (since `getAllRecipes()` filters to `parent_recipe_id IS NULL`)\n- But they also won't be associated with any parent anymore\n\n## Current behavior\n\nIn `backend/src/db/schema.sql:17`:\n```sql\nparent_recipe_id INTEGER REFERENCES recipes(id) ON DELETE SET NULL,\n```\n\n## Suggested fix\n\nEither:\n1. **Cascade delete**: Change to `ON DELETE CASCADE` so variants are deleted with parent\n2. **Warn user**: When deleting a recipe with variants, show warning and let user choose to delete variants or promote them to standalone recipes\n3. **Promote variants**: Automatically clear `variant_type` when parent is deleted so variants become standalone recipes\n\nOption 1 is simplest but could be surprising. Option 3 is a good middle ground.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T20:19:50.211140775Z","created_by":"jack","updated_at":"2026-01-11T20:23:44.840651609Z","closed_at":"2026-01-11T20:23:44.840651609Z","close_reason":"Fixed by cascading delete in application code. When a recipe is deleted, all its variants are now deleted first."}
{"id":"recipes-ibz","title":"Clicking away should hide the tags popover","notes":"Implemented click-outside logic for the tags popover using a ref and mousedown event listener.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:56:27.624418882Z","created_by":"jack","updated_at":"2026-01-03T13:09:47.624124096Z","closed_at":"2026-01-03T13:09:47.624133714Z"}
{"id":"recipes-ig1","title":"When adding to the cooking list, it should store the number of servings too (and allow updating it)","notes":"Added servings control to Cooking List items.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:44:45.71364626Z","created_by":"jack","updated_at":"2026-01-03T12:35:17.634555493Z","closed_at":"2026-01-03T12:35:17.634567022Z"}
{"id":"recipes-iig","title":"No success feedback after fire-and-forget import","description":"## Problem\n\nWhen importing a recipe via the queue functions (fire-and-forget mode in `AddRecipe.tsx`), the user experience is poor:\n\n1. User starts import\n2. Progress spinner shows with messages\n3. User clicks 'Import Another'\n4. Import completes in background\n5. **No indication that the recipe was saved successfully**\n6. User has to manually go to home page to see if recipe appeared\n\n## Current behavior\n\nIn `AddRecipe.tsx`, the `onComplete` callbacks just clear state:\n```typescript\n() =\u003e {\n  setUrlProgress(null);\n  setUrlInput('');\n}\n```\n\n## Suggested fix\n\nOptions:\n1. **Toast notification**: Show a brief success toast with recipe title and link to view\n2. **Success state**: Show a success message with 'View Recipe' button before clearing\n3. **Background indicator**: Show a small badge/indicator that imports completed\n\nA simple toast notification would provide good UX without being intrusive. Could use a simple toast system or just a temporary success message in the UI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T20:22:57.909888676Z","created_by":"jack","updated_at":"2026-01-11T20:26:24.904993812Z","closed_at":"2026-01-11T20:26:24.904993812Z","close_reason":"Added toast notifications that appear when imports complete. Shows recipe title with View and Dismiss buttons."}
{"id":"recipes-iws","title":"Improve the sound used when the timer finishes","description":"Currently it sounds like someone tapping a microphone, which isn't very noticeable - make it more of a success sound","notes":"Replaced the base64 beep with a dedicated timer.mp3 file for a better alert sound.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T14:42:11.932317982Z","created_by":"jack","updated_at":"2026-01-03T15:16:27.022175524Z","closed_at":"2026-01-03T15:16:27.022183441Z"}
{"id":"recipes-kjs","title":"Add a spacer between the start timer buttons when there are multiple timers for one step","notes":"Added a flex container with a gap between multiple timers in a single step.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T14:37:32.088251192Z","created_by":"jack","updated_at":"2026-01-03T14:38:57.960396417Z","closed_at":"2026-01-03T14:38:57.96040565Z"}
{"id":"recipes-l6q","title":"Show the recipes that were suggested in the chat history","notes":"Implemented persistent storage and display of suggested recipes in chat history using a new metadata column in chat_messages.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T13:03:15.043046943Z","created_by":"jack","updated_at":"2026-01-03T13:11:24.839020412Z","closed_at":"2026-01-03T13:11:24.839029636Z"}
{"id":"recipes-lag","title":"Improve the cooking list ux","description":"In the cooking list, the entries seem a bit weird - can you make that view feel a bit better? I'm not sure what would work better, but at the moment it just feels like some random text.","notes":"Overhauled Cooking List UX with card-based layout and tabbed view.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:46:59.784842715Z","created_by":"jack","updated_at":"2026-01-03T12:35:08.883672459Z","closed_at":"2026-01-03T12:35:08.883679412Z"}
{"id":"recipes-lid","title":"Show the selected tags before the ingredients filter box, next to the tags button","notes":"Moved selected tags inline between the tags button and ingredients filter.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T12:51:54.217318018Z","created_by":"jack","updated_at":"2026-01-03T13:09:10.572919707Z","closed_at":"2026-01-03T13:09:10.572931094Z"}
{"id":"recipes-nos","title":"Change tag filtering to require all, not any","description":"Currently tag filtering uses OR logic (show recipes matching ANY selected tag). Change to AND logic (require ALL selected tags). This is more intuitive for narrowing down results.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T10:57:14.825714261Z","created_by":"jack","updated_at":"2026-01-03T11:23:27.224870056Z","closed_at":"2026-01-03T11:23:27.224870056Z","close_reason":"Changed tag filtering from OR to AND logic. Recipes now must have ALL selected tags to be shown.","labels":["filtering"]}
{"id":"recipes-qc4","title":"The create with AI button is too prominent - it should just be a normal button","notes":"Styled the AI generator button to be a standard outline button instead of a gradient banner.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:46:37.350843861Z","created_by":"jack","updated_at":"2026-01-03T12:32:40.258750761Z","closed_at":"2026-01-03T12:32:40.258777277Z"}
{"id":"recipes-qo9","title":"Don't show variants on the homepage by default","description":"There might be lots of variants, so they pollute the main view. They should also not be picked by surprise me.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:04:39.238472158Z","created_by":"jack","updated_at":"2026-01-03T11:24:06.112961162Z","closed_at":"2026-01-03T11:24:06.112961162Z","close_reason":"Variants (recipes with parentRecipeId) are now filtered out from the homepage view and excluded from 'Surprise me' picks.","labels":["variants"]}
{"id":"recipes-rjr","title":"If a recipe is a variant, it should have a link to the main recipe at the top","description":"When viewing a variant recipe, display a prominent link/banner at the top pointing to the parent recipe. This helps users understand the recipe's relationship and navigate easily.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:06:59.584643685Z","created_by":"jack","updated_at":"2026-01-03T11:27:42.988164711Z","closed_at":"2026-01-03T11:27:42.988164711Z","close_reason":"Added parent recipe link at the top when viewing a variant. Updated backend to include parentRecipe (id, title) in the response and frontend to display it prominently.","labels":["variants"]}
{"id":"recipes-v2r","title":"Fix error","description":"/home/jack/code/recipes/node_modules/path-to-regexp/src/index.ts:225\n      throw new PathError(`Missing parameter name at index ${index}`, str);\n            ^\n\n\nPathError [TypeError]: Missing parameter name at index 1: *; visit https://git.new/pathToRegexpError for info\n    at name (/home/jack/code/recipes/node_modules/path-to-regexp/src/index.ts:225:13)\n    at parse (/home/jack/code/recipes/node_modules/path-to-regexp/src/index.ts:242:62)\n    at pathToRegexp (/home/jack/code/recipes/node_modules/path-to-regexp/src/index.ts:480:54)\n    at Object.match (/home/jack/code/recipes/node_modules/path-to-regexp/src/index.ts:438:28)\n    at matcher (/home/jack/code/recipes/node_modules/router/lib/layer.js:86:23)\n    at new Layer (/home/jack/code/recipes/node_modules/router/lib/layer.js:93:62)\n    at Function.route (/home/jack/code/recipes/node_modules/router/index.js:428:17)\n    at Function.route (/home/jack/code/recipes/node_modules/express/lib/application.js:257:22)\n    at app.\u003ccomputed\u003e [as get] (/home/jack/code/recipes/node_modules/express/lib/application.js:478:22)\n    at \u003canonymous\u003e (/home/jack/code/recipes/backend/src/index.ts:37:5) {\n  originalPath: '*'\n}\n","notes":"Corrected the catch-all route to '/*path'. Express 5 (path-to-regexp v8) requires named wildcards, and '/*path' is the correct syntax for matching everything after the slash.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-03T12:36:56.138350872Z","created_by":"jack","updated_at":"2026-01-03T12:45:06.756103194Z","closed_at":"2026-01-03T12:45:06.756112691Z"}
{"id":"recipes-woj","title":"Increase chat modal height","description":"Increase the max-height of the chat modal to 95vh and the pending recipes container to 60vh to utilize more screen space.","notes":"Increased chat modal max-height to 95vh and pending recipes view max-height to 60vh.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T13:18:06.523276729Z","created_by":"jack","updated_at":"2026-01-03T13:18:36.442877604Z","closed_at":"2026-01-03T13:18:36.44288734Z"}
{"id":"recipes-xau","title":"Show recipes that the LLM has suggested","description":"Currently recipes that it suggests don't appear until you choose to save them - they should be previewable inline and maybe also viewable in full screen before saving too","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T11:02:37.709987951Z","created_by":"jack","updated_at":"2026-01-03T11:30:43.717724513Z","closed_at":"2026-01-03T11:30:43.717724513Z","close_reason":"Added inline preview for LLM suggested recipes in chat modal. Shows recipe title with Preview toggle button. Preview section shows description, meta info, ingredients, steps, and tags. Added Dismiss button to clear pending recipe.","labels":["llm"]}
{"id":"recipes-z4a","title":"Add a way to start a fresh chat with the LLM","notes":"Added backend endpoint and frontend button to clear chat history and start a fresh conversation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T13:18:14.324812332Z","created_by":"jack","updated_at":"2026-01-03T14:38:02.608234853Z","closed_at":"2026-01-03T14:38:02.608244216Z"}
